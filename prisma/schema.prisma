datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model ArticleEventEntity {
  articleId String @db.Char(36)
  authorId  String @db.Char(36)
  eventType ArticleEventType
  eventData String   // イベントデータ（タイトル、コンテンツ、著者IDなど）をJSON形式で保存
  version   Int   // バージョン番号
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("article_events")
  @@unique([articleId, version])
}

enum ArticleEventType {
  CREATE
  CHANGE_TITLE
  CHANGE_CONTENT
  PUBLISH
  ARCHIVE
  RE_DRAFT
}

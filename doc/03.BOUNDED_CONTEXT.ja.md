# 概要

ドメイン駆動設計(DDD)に基づいて、それぞれの業務領域における集約、投影モデル、不変条件を定義する。

## 中核の業務領域

### 記事投稿管理

- 記事管理
  - 集約 : Article
  - 不変条件: 公開時はタイトルと本文必須、非公開記事は検索対象外
- 記事の検索
  - 投影モデル : IndexedArticle
  - 不変条件: 公開記事にのみコメント可能
- 記事へのコメント
  - 集約 : Comment
  - イベントを受けてインデックス更新（ArticlePublished, ArticleEdited）

## 補助的な業務領域

### モデレーション

- モデレーション : コメントの管理、スパム対策
  - 集約 : ModerationCase
  - 不変条件: 対象コメントは一度承認/削除したら再利用不可

## 一般的な業務領域

### ユーザー管理

- ユーザー管理
  - 集約 : User
  - 不変条件: 存在しないユーザーに権限付与不可
- ユーザーの権限設定、変更
  - 集約 : Role, Scope
  - 不変条件: 管理者権限は常に1人以上存在

### 通知管理

- 通知管理
  - 集約 : Subscription
  - 不変条件: サブスク解除済みユーザーには配信不可

### データ分析

- 利用状況の分析、レポート作成
  - 集約 : EventStream
  - 不変条件: ログは追記のみ、改ざん不可
